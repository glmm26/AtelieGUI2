<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <title>Ateliê Online</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css')}}">
</head>
<body>
    <header class="atelier-header">
        <div class="header-content">
            <div class="header-left">
                <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" style="height:48px; vertical-align:middle;">
                <span class="header-title">Ateliê Online</span>
            </div>
            <nav class="header-center atelier-nav">
                <ul>
                    <li><a href="{{ url_for('servicos.estamparia') }}">Estamparia</a></li>
                    <li><a href="{{ url_for('servicos.conserto') }}">Conserto</a></li>
                    <li><a href="{{ url_for('servicos.customizacao') }}">Customização</a></li>
                </ul>
            </nav>
            <div class="header-right">
                <div class="user-menu">
                    <button class="user-btn" id="userBtn">
                        {% if current_user.foto %}
                            <!-- use inline SVG with an <image> so we can center/crop the photo inside a circle -->
                            <svg class="user-avatar-svg" width="44" height="44" viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <defs>
                                    <clipPath id="avatarClip">
                                        <circle cx="22" cy="22" r="22" />
                                    </clipPath>
                                </defs>
                                <image x="0" y="0" width="44" height="44" href="{{ url_for('static', filename='uploads/' ~ current_user.foto) }}" preserveAspectRatio="xMidYMid slice" clip-path="url(#avatarClip)" />
                            </svg>
                        {% else %}
                            <img src="{{ url_for('static', filename='img/default_profile.svg') }}" alt="Foto padrão" class="user-avatar">
                        {% endif %}
                    </button>
                    <div class="user-dropdown" id="userDropdown" style="display:none;">
                        <a href="{{ url_for('auth.profile') }}" class="profile-btn">Perfil</a>
                        <a href="{{ url_for('auth.logout') }}" class="logout-btn">Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Conteúdo principal pode ser adicionado depois -->
    <main class="main-cards">
        <div class="card">
            <h2 class="card-title">Estamparia</h2>
            <img src="{{ url_for('static', filename='img/est1.jpg') }}" alt="Estamparia" class="card-img">
            <p class="card-desc">Personalize peças com estampas exclusivas e modernas para todos os gostos.</p>
        </div>
        <div class="card">
            <h2 class="card-title">Conserto</h2>
            <img src="{{ url_for('static', filename='img/cons1.jpg') }}" alt="Conserto" class="card-img">
            <p class="card-desc">Recupere e renove suas roupas e acessórios com nosso serviço especializado.</p>
        </div>
        <div class="card">
            <h2 class="card-title">Customização</h2>
            <img src="{{ url_for('static', filename='img/cus1.jpg') }}" alt="Customização" class="card-img">
            <p class="card-desc">Transforme suas peças com detalhes únicos e materiais diferenciados.</p>
        </div>
    </main>
    <a href="{{ url_for('servicos.projeto') }}" class="floating-projeto-btn" title="Projeto">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect x="6" y="8" width="20" height="16" rx="3" fill="#fff" stroke="#D94E2A" stroke-width="2"/>
            <line x1="10" y1="12" x2="22" y2="12" stroke="#D94E2A" stroke-width="1.5"/>
            <line x1="10" y1="16" x2="22" y2="16" stroke="#D94E2A" stroke-width="1.5"/>
            <line x1="10" y1="20" x2="18" y2="20" stroke="#D94E2A" stroke-width="1.5"/>
        </svg>
    </a>
    <script>
        const userBtn = document.getElementById('userBtn');
        const userDropdown = document.getElementById('userDropdown');
        userBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            userDropdown.style.display = userDropdown.style.display === 'block' ? 'none' : 'block';
        });
        document.addEventListener('click', function() {
            userDropdown.style.display = 'none';
        });
    </script>
</body>
</html>
